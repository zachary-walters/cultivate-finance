version: '3'

name: rothvtrad 

services:
  backend:
    container_name: rest-api-server
    build:
      context: ./../backend
      dockerfile: ./../backend/backend.dockerfile
    restart: always
    ports:
      - "8660:8660"
    deploy:
      mode: replicated
      replicas: 1
    environment:
      PORT: 8660

  sonarqube: 
    container_name: sonarqube
    build:
      context: ./../sonarqube
      dockerfile: ./../sonarqube/sonarqube.dockerfile
    restart: always
    ports:
      - "9998:9092"
      - "9999:9000"
    deploy:
      mode: replicated
      replicas: 1